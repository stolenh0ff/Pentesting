import os
from icmplib import traceroute
from rich.console import Console
from rich.table import Table

ip_address = input("IPAddress: ")

table = Table(title="Hosts/Ports")
columns = ["Distance", "IP Address", "Average RTT(ms)"]
rows = []

def tracert():
    hops = traceroute(ip_address)
    #print('Distance/TTL\tAddress\t\t\tAverage round-trip time')
    last_distance = 0
    n0de = 0
    #last_n0de = n0de - 1
    for hop in hops:
        dist = hop.distance
        addr = hop.address
        rtt = hop.avg_rtt
        if last_distance + 1 != dist:
            addr = "Unknown Address"
        rows.append([dist, addr, rtt])
        last_distance = dist
    for column in columns:
        table.add_column(column)
    for row in rows:
        table.add_row(*row, style='bright_green')
    console = Console()
    console.print(table)
#exec
os.system("clear")
tracert()
